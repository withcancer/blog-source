---
title: JAVA中的弱引用
date: 2016-9-2
categories:
- 后端
- JAVA
tags:
- 后端
- JAVA
---
ES6中WeakMap，WeakSet，可以自主检测集合中的key-value pair有没有引用者，并及时做出清除，也就是被垃圾回收器回收。JAVA中的弱引用也是和垃圾回收器密切相关的。

<!-- more -->
JAVA中的引用分为以下几个类型：
- 强引用：通常我们通过new来创建一个新对象时返回的引用就是一个强引用，若一个对象通过一系列强引用可到达，它就是强可达的(strongly reachable)，那么它就不被回收
- 软引用：软引用和弱引用的区别在于，若一个对象是弱引用可达，无论当前内存是否充足它都会被回收，而软引用可达的对象在内存不充足时才会被回收，因此软引用要比弱引用“强”一些
- 弱引用：如果一个对象具有弱引用，在GC线程扫描内存区域的过程中，不管当前内存空间足够与否，都会回收内存，利用jdk中的ThreadLocal就是弱引用的，具体间下面的详细说明。
- 虚引用：如果一个对象仅持有虚引用，在任何时候都可能被垃圾回收，虚引用与软引用和弱引用的一个区别在于：虚引用必须和引用队列联合使用，虚引用主要用来跟踪对象 被垃圾回收的活动。

它们由强到弱依次是：强引用、软引用、弱引用、虚引用。

